<!DOCTYPE html>
<html>
  <head>
    <title>Jasmine Spec Runner</title>

    <script type="text/javascript" src="spec/config.js"></script>

    <!-- jasmine source-->
    <link rel="shortcut icon" type="image/png" href="jasmine-2.4.1/jasmine_favicon.png">
    <link rel="stylesheet" type="text/css" href="jasmine-2.4.1/jasmine.css">
    <script type="text/javascript" src="jasmine-2.4.1/jasmine.js"></script>
    <script type="text/javascript" src="jasmine-2.4.1/jasmine-html.js"></script>
    <!--<script type="text/javascript" src="jasmine-2.4.1/boot.js"></script>-->
    <script type="text/javascript" src="jasmine-2.4.1/custom_boot.js"></script>
    <script type="text/javascript" src="spec/helper.js"></script>

    <!-- TESTS -->
    <script type="text/javascript" src="scripts/createDocument.js"></script>
    <script type="text/javascript" src="scripts/userSettings.js"></script>
    <script type="text/javascript" src="scripts/connectivity.js"></script>
    <script type="text/javascript" src="scripts/loggingService.js"></script>
    <script type="text/javascript" src="scripts/dataAccessLowLevel.js"></script>
    <script type="text/javascript" src="scripts/documentsResultSetFilters.js"></script>
    <script type="text/javascript" src="scripts/startEndKeyLimits.js"></script>
	<script type="text/javascript" src="scripts/predixConfiguration_view.js"></script>
    <script type="text/javascript" src="scripts/versionService.js"></script>
    <script type="text/javascript" src="scripts/concurentRequests_async.js"></script>
    <script type="text/javascript" src="scripts/emailService.js"></script>

	<!-- MEMORY STATEFUL SYSTEMS -->

	<script type="text/javascript" src="scripts/notifyService.js"></script>
	<script type="text/javascript" src="scripts/documentChangedNotification.js"></script>
    <script type="text/javascript" src="scripts/documentChangedNotificationExtention.js"></script>
	<script type="text/javascript" src="scripts/localNotifications.js"></script>
    <script type="text/javascript" src="scripts/localNotifications_callBack.js"></script>
	<script type="text/javascript" src="scripts/windowService.js"></script>
	<script type="text/javascript" src="scripts/sync-deprecate/commandProcessor.js"></script>
    <script type="text/javascript" src="scripts/commandProcessor_negative.js"></script>
    <script type="text/javascript" src="scripts/loadInvalidAppWindowService.js"></script>

    <!--Keep tests at the buttom. They shut down local Couchbase -->
    <script type="text/javascript" src="scripts/dataAccessHighLevel.js"></script>
    <script type="text/javascript" src="scripts/userInformationService.js"></script>

    <!-- RUN MANUALLY: SOME TESTS RESET CURRENT APP AND WIPE OUT ENV. FOR OTHERS TEST APP SHOULD EXIT FOR CALL-BACK TO BE CALLED -->
        <!--<script type="text/javascript" src="scripts/createTimingDocument.js"></script>-->
        <!--<script type="text/javascript" src="scripts/updateAppWindowService.js"></script>-->
        <!--<script type="text/javascript" src="scripts/showSeriosErrorWindowService.js"></script>-->
        <!--<script type="text/javascript" src="scripts/openUrlService.js"></script>-->
        <!--<script type="text/javascript" src="scripts/touchIdService.js"></script>-->
        <!--<script type="text/javascript" src="scripts/touchId_device_owner_async.js"></script>-->

    <!--WORKS ON A DEVICE ONLY-->
      <!--<script type="text/javascript" src="scripts/secureStorageService_prompt.js"></script>-->
      <!--<script type="text/javascript" src="scripts/barcodeScannerService.js"></script>-->

  </head>
  <script type="text/javascript">

    var htmlReport = null;

    function runJasmineTests() {
        var button = document.getElementById('clickButt');
        button.style.display = 'none';
        jasmine.executeOnDemand();
    }

    function exportReport(){

      htmlReport = document.getElementsByClassName('jasmine_html-reporter');
      var reportDetails = '<html><head><title>E2E test report </title>';

      var insertDiv =
              "<link rel=\"shortcut icon\" type=\"image/png\" href=\"jasmine-2.4.1/jasmine_favicon.png\">"+
              "<link rel=\"stylesheet\" type=\"text/css\" href=\"jasmine-2.4.1/jasmine.css\">"+
              "<script type=\"text/javascript\" src=\"jasmine-2.4.1/jasmine.js\"><\/script>"+
              "<script type=\"text/javascript\" src=\"jasmine-2.4.1/jasmine-html.js\"><\/script>"+
              "<script type=\"text/javascript\" src=\"jasmine-2.4.1/custom_boot.js\"><\/script>";

      reportDetails = reportDetails+insertDiv+'</head><body>';
      reportDetails = reportDetails+htmlReport[0];
      reportDetails = reportDetails+'</body></html>';

      console.log(reportDetails);
    }

  </script>
  <body>
    <button id="exportButt" type="button" onclick="exportReport()" >Export Report</button>
    <button id="clickButt" type="button" onclick="runJasmineTests()">Run REST API Tests</button>
    <div id="stage" style="display:none;"></div>
  </body>
</html>
